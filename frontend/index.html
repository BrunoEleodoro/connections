<!-- Index.html file -->
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, initial-scale=1.0">
    <!-- Tailwind CSS (CDN) -->
    <script>
      tailwind.config = {
        darkMode: 'class'
      };
    </script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      html,body{max-width:100vw;overflow-x:hidden;}
      #my-qr-reader video,#my-qr-reader canvas{width:100% !important;height:auto !important;}
    </style>
    <title>QR Code Scanner / Reader
    </title>
</head>

<body class="overflow-x-hidden">
    <!-- App Bar showing connected user info -->
    <div id="app-bar" class="w-full flex items-center justify-between p-4 bg-gray-100 dark:bg-gray-800" style="display:none;">
        <div class="flex items-center">
            <img id="user-photo" src="" alt="User Photo" class="w-10 h-10 rounded-full mr-3 hidden" />
            <div>
                <p id="user-name" class="font-semibold text-gray-900 dark:text-gray-100"></p>
                <p id="user-username" class="text-sm text-gray-500 dark:text-gray-400"></p>
            </div>
        </div>
        <span class="text-sm uppercase tracking-wide text-gray-600 dark:text-gray-400">Connected user</span>
    </div>
    <div class="flex flex-col items-center justify-center min-h-screen p-4">
        <h1 class="text-4xl font-bold">Connections</h1>
        <p id="user-info" class="mt-2 text-lg text-gray-700 dark:text-gray-300"></p>
        <!-- Add Event & Connections List -->
        <div id="events-container" class="w-full max-w-md mt-6">
            <div class="flex justify-between items-center mb-4">
                <h2 class="text-2xl font-semibold">Events</h2>
                <button id="add-event-btn" class="px-4 py-2 bg-emerald-500 text-white rounded-lg hover:bg-emerald-600 active:bg-emerald-700 transition">Add Event</button>
            </div>
            <ul id="events-list" class="space-y-3"></ul>
        </div>
        <button id="connect-btn" class="px-8 py-4 text-xl bg-blue-600 text-white rounded-lg mt-8 hover:bg-blue-700 active:bg-blue-800 transition">Connect</button>
        <div id="scanner-section" class="w-full max-w-md" style="display:none;">
            <div id="my-qr-reader"></div>
        </div>
        <div id="result-section" class="w-full max-w-md" style="display:none;">
            <p id="scanned-value"></p>
            <label for="event-select" class="block mt-4 mb-1 text-sm font-medium text-gray-700 dark:text-gray-300">Select Event</label>
            <select id="event-select" class="w-full p-3 border border-gray-300 rounded-lg dark:border-gray-600"></select>
            <textarea id="notes-area" rows="4" placeholder="What did you discuss?" class="w-full p-3 border border-gray-300 rounded-lg mt-4 resize-y dark:border-gray-600"></textarea>
            <button id="save-btn" class="px-6 py-3 mt-4 text-white bg-emerald-500 rounded-lg hover:bg-emerald-600 active:bg-emerald-700 transition">Save</button>
        </div>
    </div>
    <script
        src="https://unpkg.com/html5-qrcode">
    </script>
    <!-- Telegram Web App SDK -->
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="src/script.js"></script>
    <!-- Add Event Modal -->
    <div id="add-event-modal" class="fixed inset-0 bg-black/50 flex items-center justify-center z-50" style="display:none;">
        <div class="bg-white dark:bg-gray-900 p-6 rounded-lg w-11/12 max-w-md">
            <h2 class="text-xl font-semibold mb-4">Add Event</h2>
            <input id="new-event-name" type="text" placeholder="Event name" class="w-full border border-gray-300 dark:border-gray-600 rounded-lg p-3 mb-4" />
            <div class="flex justify-end space-x-3">
                <button id="cancel-add-event" class="px-4 py-2 rounded-lg bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200">Cancel</button>
                <button id="add-event-save-btn" class="px-4 py-2 rounded-lg bg-blue-600 text-white hover:bg-blue-700">Save</button>
            </div>
        </div>
    </div>
</body>

</html>